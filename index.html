<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paper Soccer</title>
    <style>
        canvas {
            border: 1px solid black;
        }
        #turnIndicator {
            font-size: 24px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="600" height="600"></canvas>
    <div id="turnIndicator"></div>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const turnIndicator = document.getElementById('turnIndicator');

        const gridSize = 10;
        const cellSize = 50;
        const offsetX = cellSize;
        const offsetY = cellSize;

        let currentPlayer = 1;
        let ballPosition = { x: 5, y: 5 };
        let lines = new Set();

        function drawGrid() {
            ctx.strokeStyle = '#ccc';
            for (let i = 0; i <= gridSize; i++) {
                ctx.beginPath();
                ctx.moveTo(offsetX + i * cellSize, offsetY);
                ctx.lineTo(offsetX + i * cellSize, offsetY + gridSize * cellSize);
                ctx.stroke();

                ctx.beginPath();
                ctx.moveTo(offsetX, offsetY + i * cellSize);
                ctx.lineTo(offsetX + gridSize * cellSize, offsetY + i * cellSize);
                ctx.stroke();
            }
        }

        function drawGoals() {
            ctx.fillStyle = '#ddd';
            ctx.fillRect(offsetX + 4 * cellSize, 0, 2 * cellSize, cellSize);
            ctx.fillRect(offsetX + 4 * cellSize, offsetY + 10 * cellSize, 2 * cellSize, cellSize);
        }

        function drawBall() {
            ctx.fillStyle = 'red';
            ctx.beginPath();
            ctx.arc(offsetX + ballPosition.x * cellSize, offsetY + ballPosition.y * cellSize, 5, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawLines() {
            lines.forEach(line => {
                const [start, end, player] = JSON.parse(line);
                ctx.strokeStyle = player === 1 ? 'blue' : 'green';
                ctx.lineWidth = 2;
                ctx.beginPath();
                ctx.moveTo(offsetX + start.x * cellSize, offsetY + start.y * cellSize);
                ctx.lineTo(offsetX + end.x * cellSize, offsetY + end.y * cellSize);
                ctx.stroke();
            });
        }

        function isValidMove(x, y) {
            if (x < 0 || x > gridSize || y < 0 || y > gridSize) return false;
            const newLine = JSON.stringify([ballPosition, { x, y }, currentPlayer]);
            const reverseLine = JSON.stringify([{ x, y }, ballPosition, currentPlayer]);
            if (lines.has(newLine) || lines.has(reverseLine)) return false;
            return Math.abs(x - ballPosition.x) <= 1 && Math.abs(y - ballPosition.y) <= 1 && (x !== ballPosition.x || y !== ballPosition.y);
        }

        function checkWin() {
            if (ballPosition.y === 0 && ballPosition.x >= 4 && ballPosition.x <= 5) {
                alert("Player 2 wins!");
                return true;
            }
            if (ballPosition.y === gridSize && ballPosition.x >= 4 && ballPosition.x <= 5) {
                alert("Player 1 wins!");
                return true;
            }
            return false;
        }

        function handleClick(event) {
            const rect = canvas.getBoundingClientRect();
            const x = Math.floor((event.clientX - rect.left - offsetX) / cellSize);
            const y = Math.floor((event.clientY - rect.top - offsetY) / cellSize);

            if (isValidMove(x, y)) {
                const newLine = JSON.stringify([ballPosition, { x, y }, currentPlayer]);
                lines.add(newLine);
                ballPosition = { x, y };

                if (checkWin()) {
                    canvas.removeEventListener('click', handleClick);
                    return;
                }

                currentPlayer = 3 - currentPlayer; // Switch player (1 -> 2, 2 -> 1)
                updateTurnIndicator();
                draw();
            }
        }

        function updateTurnIndicator() {
            turnIndicator.textContent = `Player ${currentPlayer}'s turn`;
            turnIndicator.style.color = currentPlayer === 1 ? 'blue' : 'green';
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawGrid();
            drawGoals();
            drawLines();
            drawBall();
        }

        canvas.addEventListener('click', handleClick);
        updateTurnIndicator();
        draw();
    </script>
</body>
</html>